/*! build package in 2022/8/3 14:29:55 ! */
import{a as g,b as M,r as O,f as j,h as S,E as $,i as E,o as y,j as w,k as d,w as z,v as B,u as m,l as x,t as F,p as T,m as W,y as k}from"./entry-f5baa1b3.mjs";import{u as I,a as A}from"./useState-775bb93e.mjs";const L=r=>(T("data-v-3db4ff0a"),r=r(),W(),r),D={class:"model"},N=L(()=>d("div",{class:"chart-title"},"Model Numbers by Organizations",-1)),U={style:{position:"relative"}},C=L(()=>d("div",{id:"model-container"},null,-1)),G={class:"watermark"},R=L(()=>d("br",null,null,-1)),V=x(" @OpenBMB "),P=M({__name:"Model",setup(r){let i,c=O(""),a;const l=I();l.value={loading:!0,isLoadFailed:!1};const h=j(),b=async()=>{var f;return fetch(`${(f=h==null?void 0:h.app)==null?void 0:f.baseURL}all_models.json`).then(o=>o.json()).then(o=>{var e;l.value={loading:!1,isLoadFailed:!1},c.value=(e=o[0])==null?void 0:e.last_updated;const n=o==null?void 0:o.reduce((t,s,p)=>(p==0||(t=[...t,...s.affiliation]),t),[]).reduce((t,s)=>((s.toLowerCase()==="facebook"||s.toLowerCase()==="meta")&&(s="Meta(Facebook)"),t[s]=t[s]?++t[s]:1,t),{});a=Object.fromEntries(Object.entries(n).sort((t,s)=>s[1]-t[1]))}).catch(()=>{a=[],l.value={loading:!0,isLoadFailed:!0}})};return S(()=>{setTimeout(async()=>{i=$.init(document.getElementById("model-container")),await b();let f={color:"#2f2efc",tooltip:{show:!0,trigger:"axis"},grid:{bottom:210,left:68,right:48},xAxis:{type:"category",data:Object.keys(a),min:-1,max:Object.keys(a).length,boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#fff",alignWithLabel:!0}},axisTick:{show:!1,alignWithLabel:!0},axisLine:{show:!1},axisLabel:{rotate:90}},yAxis:{type:"value",interval:2,max(n){return n.max+1},splitLine:{show:!0,lineStyle:{color:"#fff"}},axisTick:{show:!1},axisLine:{show:!1}},series:[{data:Object.values(a),type:"bar",barWidth:"60%",label:{show:!0,position:"outside"}}]};A().value&&(f={color:"#2f2efc",tooltip:{show:!0,trigger:"axis",extraCssText:"transform:rotate(90deg)"},grid:{bottom:48,left:100,right:48},xAxis:{type:"value",position:"top",splitLine:{show:!0,lineStyle:{color:"#fff",alignWithLabel:!0}},axisLabel:{rotate:90}},yAxis:{type:"category",min:-1,max:Object.keys(a).length,boundaryGap:!1,data:Object.keys(a).reverse(),splitLine:{show:!0,lineStyle:{color:"#fff"}},axisLabel:{rotate:-45,fontSize:8}},series:[{data:Object.values(a).reverse(),type:"bar",barWidth:"60%"}]}),i.setOption(f),window.addEventListener("resize",()=>{i.resize()})},1e3)}),E(()=>{i==null||i.dispose()}),(f,o)=>(y(),w("div",D,[N,d("div",U,[C,z(d("div",G,[x(" Last updated: "+F(m(c))+" ",1),R,V],512),[[B,m(c)!=""]])])]))}});var q=g(P,[["__scopeId","data-v-3db4ff0a"]]);const v=r=>(T("data-v-35fbb2de"),r=r(),W(),r),H={class:"parameter"},J=v(()=>d("div",{class:"chart-title"},"Model Parameters by Organizations",-1)),K={style:{position:"relative"}},Q=v(()=>d("div",{id:"param-container"},null,-1)),X={class:"watermark"},Y=v(()=>d("br",null,null,-1)),Z=x(" @OpenBMB "),ee=M({__name:"Parameter",setup(r){let i,c=O(""),a,l;const h=j(),b=I();b.value={loading:!0,isLoadFailed:!1};const f=async()=>{var o;return fetch(`${(o=h==null?void 0:h.app)==null?void 0:o.baseURL}all_models.json`).then(n=>n.json()).then(n=>{var e;b.value={loading:!1,isLoadFailed:!1},c.value=(e=n==null?void 0:n[0])==null?void 0:e.last_updated,a=n==null?void 0:n.reduce((t,s,p)=>{var _;return p==0||(_=s.affiliation)==null||_.forEach(u=>{t[u]?(s.parameters_dense&&t[u].push(s.parameters_dense),s.parameters_MoE&&t[u].push(s.parameters_MoE)):(t[u]=[],s.parameters_dense&&t[u].push(s.parameters_dense),s.parameters_MoE&&t[u].push(s.parameters_MoE))}),t},{}),Object.keys(a).forEach(t=>{const s=a[t].map(p=>{const _=p==null?void 0:p.map(u=>Number(u.replace(/~/g,"").replace("B","")));return Math.max(..._)});a[t]=s.reduce((p,_)=>p+_,0)}),a["Meta(Facebook)"]=a.Meta+a.Facebook,delete a.Meta,delete a.Facebook,l=Object.fromEntries(Object.entries(a).sort((t,s)=>s[1]-t[1]))}).catch(()=>{l=[],b.value={loading:!0,isLoadFailed:!0}})};return S(()=>{setTimeout(async()=>{i=$.init(document.getElementById("param-container")),await f();let o={color:"#2f2efc",tooltip:{show:!0,trigger:"axis",formatter(e){return`<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#315efe;"></span> ${e[0].name} : ${Math.ceil(a[e[0].name]*100)/100} B `}},grid:{bottom:210,left:68,right:48},xAxis:{type:"category",min:-1,max:Object.keys(l).length,data:Object.keys(l),boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#fff",alignWithLabel:!0}},axisTick:{show:!1,alignWithLabel:!0},axisLine:{show:!1},axisLabel:{rotate:90}},yAxis:{type:"value",interval:2,splitLine:{show:!0,lineStyle:{color:"#fff"}},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!0,formatter(e){return`{a|2}{b|${e}}`},rich:{b:{fontSize:10,padding:[10,0,0,2]}}}},series:[{data:Object.values(l).map(e=>e<2?e:Math.ceil(Math.log2(e)*100)/100),type:"bar",barWidth:"60%",label:{show:!1,position:"outside",formatter(e){return Math.ceil(a[e.name]*100)/100}}}]};A().value&&(o={color:"#2f2efc",tooltip:{show:!0,trigger:"axis",formatter(e){return`<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#315efe;"></span> ${e[0].name} : ${Math.ceil(a[e[0].name]*100)/100} B `},extraCssText:"transform:rotate(90deg)"},grid:{bottom:48,left:100,right:48},xAxis:{type:"value",position:"top",splitLine:{show:!0,lineStyle:{color:"#fff",alignWithLabel:!0}},axisLabel:{show:!0,rotate:90,formatter(e){return`{a|2}{b|${e}}`},rich:{b:{fontSize:10,padding:[10,0,0,2]}}}},yAxis:{type:"category",min:-1,max:Object.keys(l).length,boundaryGap:!1,data:Object.keys(l).reverse(),splitLine:{show:!0,lineStyle:{color:"#fff"}},axisLabel:{rotate:-45,fontSize:8}},series:[{data:Object.values(l).map(e=>e<2?e:Math.ceil(Math.log2(e)*100)/100).reverse(),type:"bar",barWidth:"60%"}]}),i.setOption(o),window.addEventListener("resize",()=>{i.resize()})},1e3)}),E(()=>{i==null||i.dispose()}),(o,n)=>(y(),w("div",H,[J,d("div",K,[Q,z(d("div",X,[x(" Last updated: "+F(m(c))+" ",1),Y,Z],512),[[B,m(c)!=""]])])]))}});var te=g(ee,[["__scopeId","data-v-35fbb2de"]]);const ae={},se={class:"organization flex-col"};function oe(r,i){const c=q,a=te;return y(),w("div",se,[k(c),k(a)])}var le=g(ae,[["render",oe],["__scopeId","data-v-475b2499"]]);export{le as default};
